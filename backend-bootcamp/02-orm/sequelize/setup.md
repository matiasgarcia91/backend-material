---
title: Setup
---

# Installing dependencies

To start let's create a new folder, `cd` into it and create a new npm and git project by running:

```bash
$ npm init -y
$ git init
$ touch .gitignore
```

Open the project in VSCode and add `node_modules/` to your `.gitignore` file.

To install Sequelize and it's CLI (Command Line tools) as dependencies (these are two separate packages!), simply run:

```bash
$ npm install sequelize sequelize-cli
```

You also need to install the client library for your database of choice. For us, that's the `pg` package. Sequelize relies on this to communicate with postgres. So, you will also need to run:

```bash
$ npm install pg
```

# Initializing a sequelize project

Sequelize comes with some tools which are going to help us with the setup, usage and maintainece of our database. The main one we'll be using is `sequelize-cli` which includes many helpful commands to generate Models, Migrations and Seeds; but more on that in a while, first let's set up the connection to our database.

To setup sequelize for use inside your project run:

```bash
$ npx sequelize-cli init
```

Boom! Some folders magically appeared. In your project you should now have a structure like this:

![SequelizeStructure](https://p98.f4.n0.cdn.getcloudapp.com/items/OAuLxBqg/Image+2019-12-11+at+2.13.27+PM.png?v=e7554eda707144cebe720465b3811915)

We'll be taking a look into what each of those folders mean and what they are used for as we progress in the day.

Let's make our inital commit at this stage, run:

```bash
$ git add .
$ git commit -m 'Initial commit, sequelize init'
```

You can push to your own repository if you like.

> Remember to try and keep a coherent git history. One way to do this is to commit each time we reach some milestone. It also helps us mentally break down our projects into steps.

# Connecting to the database

The first thing we need to establish is a connection to our database. To begin, make sure you have `Docker` running a container with PostgreSQL.

Remember, to check this we can run:

```bash
$ docker ps
```

If this command lists a running container with the `postgres` image you can use the same one, just make sure it's running in port 5432. If you don't have any container running we can start one with the command we learned yesterday:

```bash
$ docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=secret postgres
```

Where we can specify the password for the default user. We are going to need that password next.

Head to the `config` folder and open the `config.json` file. This is what the default config file generated by `sequelize-cli` might look like:

```js
{
  "development": {
    "username": "root",
    "password": null,
    "database": "database_development",
    "host": "127.0.0.1",
    "dialect": "mysql",
    "operatorsAliases": false
  },
  "test": {
    "username": "root",
    "password": null,
    "database": "database_test",
    "host": "127.0.0.1",
    "dialect": "mysql",
    "operatorsAliases": false
  },
  "production": {
    "username": "root",
    "password": null,
    "database": "database_production",
    "host": "127.0.0.1",
    "dialect": "mysql",
    "operatorsAliases": false
  }
}
```

We can see that there are 3 different but quite the same objects in that `.json` file. Each of these objects corresponds to one database. In big projects developers usually set up several databases, one for `production` meaning the one the app is actually going to be using when released and a couple more used while developing and testing in order to avoid messing up our apps real data. For now, we'll only be setting up the `development` database.

Modify the corresponding object and set your own PostgreSQl credentials. For a default PostgreSQl install launched with the command we just saw it will end up looking like this:

```js
"development": {
    "username": "postgres",
    "password": "secret",
    "database": "database_development",
    "host": "localhost",
    "dialect": "postgres",
    "operatorsAliases": false
  },
```

We can also change the databases name if we want to in the key `database`.

Let's test this first step! We need to see if Sequelize can connect to postgres and also create the database we are going to be using. To take care of both issues in one step we can run:

```bash
$ npx sequelize-cli db:create
```

If everything went ok we should see a message like:

![DB:CREATE_OUTPUT](https://p98.f4.n0.cdn.getcloudapp.com/items/6quLDem1/Image+2019-12-11+at+2.36.04+PM.png?v=a83e8a81ab21b2cfd13dc6c78f725665)

If you get any error go back and check if the credentials you used in the `config.json` are correct. You can review the credentials your Database Client (Postico, DBeaver) uses if you don't remember.
Use the database client to check that the database was created correctly.

If you ever want to get rid of the DB, let's say your seed data you enter has wrong ids defined, then you can do:

```bash
$ npx sequelize-cli db:drop
```

This command might fail if you DB client is connected to the DB, but you'll get an appropiate message if that is the case. **Careful** if you have real data on your DB it will get deleted when running this command so only use while testing with test/dummy data.

Now we have our database set up! Let's take a look into how we can define some tables and put some data inside. Before that, let's commit our progress so far. A message like `Set up sequelize db connection` is appropiate.
